# Entity-Relationship Diagram (ERD) for ParkirApp

## Entities (Tables) and their Attributes:

---

### 1. `User` (`tb_user`)
-   `id` (PK)
-   `name`
-   `email`
-   `password`
-   `role` (ENUM: 'user', 'petugas', 'admin', default: 'user')
-   `email_verified_at` (DATETIME, nullable)
-   `remember_token` (VARCHAR, nullable)
-   `created_at` (DATETIME)
-   `updated_at` (DATETIME)
-   `deleted_at` (DATETIME, nullable)

---

### 2. `Kendaraan` (`tb_kendaraan`)
-   `id_kendaraan` (PK)
-   `plat_nomor` (VARCHAR, UNIQUE)
-   `jenis_kendaraan` (VARCHAR)
-   `warna` (VARCHAR)
-   `pemilik` (VARCHAR, nullable)
-   `id_user` (FK to `tb_user.id`, nullable - if vehicle registered by guest or without specific user)
-   `created_at` (DATETIME)
-   `updated_at` (DATETIME)
-   `deleted_at` (DATETIME, nullable)

---

### 3. `AreaParkir` (`tb_area_parkir`)
-   `id_area` (PK)
-   `nama_area` (VARCHAR, UNIQUE)
-   `kapasitas` (INTEGER)
-   `terisi` (INTEGER)
-   `created_at` (DATETIME)
-   `updated_at` (DATETIME)

---

### 4. `Tarif` (`tb_tarif`)
-   `id_tarif` (PK)
-   `jenis_kendaraan` (VARCHAR, UNIQUE)
-   `tarif_perjam` (DECIMAL)
-   `created_at` (DATETIME)
-   `updated_at` (DATETIME)

---

### 5. `Transaksi` (`tb_transaksi`)
-   `id_parkir` (PK)
-   `id_kendaraan` (FK to `tb_kendaraan.id_kendaraan`)
-   `waktu_masuk` (DATETIME)
-   `waktu_keluar` (DATETIME, nullable)
-   `id_tarif` (FK to `tb_tarif.id_tarif`)
-   `durasi_jam` (INTEGER, nullable)
-   `biaya_total` (DECIMAL, nullable)
-   `status` (ENUM: 'masuk', 'keluar')
-   `catatan` (VARCHAR, nullable)
-   `id_user` (FK to `tb_user.id` - Operator who initiated the transaction)
-   `id_area` (FK to `tb_area_parkir.id_area`)
-   `status_pembayaran` (VARCHAR, nullable)
-   `id_pembayaran` (FK to `tb_pembayaran.id_pembayaran`, nullable)
-   `created_at` (DATETIME)
-   `updated_at` (DATETIME)
-   `deleted_at` (DATETIME, nullable)

---

### 6. `Pembayaran` (`tb_pembayaran`)
-   `id_pembayaran` (PK)
-   `id_parkir` (FK to `tb_transaksi.id_parkir`)
-   `nominal` (DECIMAL)
-   `metode` (VARCHAR)
-   `status` (ENUM: 'pending', 'berhasil')
-   `keterangan` (TEXT, nullable)
-   `id_user` (FK to `tb_user.id` - Petugas who processed the payment)
-   `waktu_pembayaran` (DATETIME, nullable)
-   `created_at` (DATETIME)
-   `updated_at` (DATETIME)
-   `deleted_at` (DATETIME, nullable)

---

### 7. `LogAktifitas` (`tb_log_aktivitas`)
-   `id_log` (PK)
-   `id_user` (FK to `tb_user.id`)
-   `aktivitas` (TEXT)
-   `waktu_aktivitas` (DATETIME)
-   `created_at` (DATETIME)
-   `updated_at` (DATETIME)

---

## Relationships:

1.  **`User` (1) --- (`tb_user.id`) ---< (`tb_kendaraan.id_user`) `Kendaraan` (M)**
    -   A User can own many Kendaraan. A Kendaraan can belong to one User. (Optional: `id_user` in `tb_kendaraan` is nullable for vehicles not associated with a registered user).

2.  **`User` (1) --- (`tb_user.id`) ---< (`tb_log_aktivitas.id_user`) `LogAktifitas` (M)**
    -   A User can perform many LogAktifitas. A LogAktifitas is performed by one User.

3.  **`User` (1) --- (`tb_user.id`) ---< (`tb_transaksi.id_user`) `Transaksi` (M)**
    -   A User (operator) can create many Transaksi. A Transaksi is created by one User.

4.  **`User` (1) --- (`tb_user.id`) ---< (`tb_pembayaran.id_user`) `Pembayaran` (M)**
    -   A User (petugas) can process many Pembayaran. A Pembayaran is processed by one User.

5.  **`Kendaraan` (1) --- (`tb_kendaraan.id_kendaraan`) ---< (`tb_transaksi.id_kendaraan`) `Transaksi` (M)**
    -   A Kendaraan can have many Transaksi. A Transaksi involves one Kendaraan.

6.  **`AreaParkir` (1) --- (`tb_area_parkir.id_area`) ---< (`tb_transaksi.id_area`) `Transaksi` (M)**
    -   An AreaParkir can have many Transaksi. A Transaksi occurs in one AreaParkir.

7.  **`Tarif` (1) --- (`tb_tarif.id_tarif`) ---< (`tb_transaksi.id_tarif`) `Transaksi` (M)**
    -   A Tarif can be applied to many Transaksi. A Transaksi uses one Tarif.

8.  **`Transaksi` (1) --- (`tb_transaksi.id_parkir`) ---< (`tb_pembayaran.id_parkir`) `Pembayaran` (1)**
    -   A Transaksi has one Pembayaran. A Pembayaran belongs to one Transaksi. (Note: `id_pembayaran` in `tb_transaksi` references `id_pembayaran` in `tb_pembayaran` for a one-to-one relationship. `id_parkir` in `tb_pembayaran` also references `id_parkir` in `tb_transaksi`, reinforcing the link.)